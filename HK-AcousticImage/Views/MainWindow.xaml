<Window x:Class="HK_AcousticImage.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:prism="http://prismlibrary.com/"
        xmlns:vlc="clr-namespace:LibVLCSharp.WPF;assembly=LibVLCSharp.WPF"
        mc:Ignorable="d"
        Title="HK Acoustic Image"
        Height="720" Width="1280">

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="200"/>
        </Grid.RowDefinitions>

        <!-- 登录信息 -->
        <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="0,0,0,10">
            <Label Content="设备IP:" VerticalAlignment="Center"/>
            <TextBox Width="150" Text="{Binding DeviceIp, UpdateSourceTrigger=PropertyChanged}" Margin="5,0"/>
            <Label Content="用户名:" VerticalAlignment="Center"/>
            <TextBox Width="100" Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}" Margin="5,0"/>
            <Label Content="密码:" VerticalAlignment="Center"/>
            <TextBox Width="100" Text="{Binding Password, UpdateSourceTrigger=PropertyChanged}" Margin="5,0"/>
            <Button Content="测试登录" Width="100" Margin="10,0"
                    Command="{Binding LoginCommand}"/>
        </StackPanel>

        <!-- 功能区 -->
        <Grid Margin="0,35,0,180" Grid.RowSpan="3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="420"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>

            <!-- 左侧按钮 -->
            <StackPanel Orientation="Vertical" Grid.Column="0" Margin="0,0,0,0">

                <!-- 监听配置 -->
                <GroupBox Header="监听主机配置" Margin="0,0,0,10">
                    <StackPanel Orientation="Vertical" Margin="10">
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                            <Label Content="监听ID:" Width="70"/>
                            <TextBox Width="67" Text="{Binding HostId}"/>
                            <Label Content="协议:" Width="50" Margin="10,0,0,0"/>
                            <ComboBox Width="100"
                                ItemsSource="{Binding ProtocolOptions}"
                                SelectedItem="{Binding Protocol}">
                            </ComboBox>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                            <Label Content="URL路径:" Width="70"/>
                            <TextBox Width="85" Text="{Binding HostUrl}"/>
                            <Label Content="端口:" Width="50" Margin="10,0,0,0"/>
                            <TextBox Width="80" Text="{Binding HostPort}"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <Button Content="获取配置" Width="100" Margin="0,0,10,0"
                                    Command="{Binding GetAlarmHostsCommand}"/>
                            <Button Content="保存配置" Width="100" Margin="0,0,10,0"
                                    Command="{Binding ConfigAlarmHostCommand}"/>
                            <Button Content="测试连接" Width="100 "
                                    Command="{Binding TestAlarmHostCommand}"/>
                        </StackPanel>
                    </StackPanel>
                </GroupBox>

                <!-- 声学检漏参数 -->
                <GroupBox Header="声学检漏参数" Margin="0,0,0,10">
                    <StackPanel Orientation="Horizontal" Margin="10">
                        <Label Content="检测阈值:" Width="63"/>
                        <TextBox Width="40" Text="{Binding Threshold}"/>
                        <Label Content="时长(s):" Width="62" Margin="10,0,0,0"/>
                        <TextBox Width="46" Text="{Binding Duration}"/>
                        <Button Content="获取" Width="70" Margin="10,0,0,0"
                                Command="{Binding GetAcousticParamsCommand}"/>
                        <Button Content="设置" Width="70" Margin="5,0,0,0"
                                Command="{Binding SetAcousticParamsCommand}"/>
                    </StackPanel>
                </GroupBox>

                <!-- 声源检测控制 -->
                <GroupBox Header="声源检测控制">
                    <StackPanel Orientation="Horizontal" Margin="10">
                        <Button Content="启动检测" Width="100" Margin="0,0,10,0"
                                Command="{Binding StartSoundCommand}"/>
                        <Button Content="停止检测" Width="100" Margin="0,0,10,0"
                                Command="{Binding StopSoundCommand}"/>
                    </StackPanel>
                </GroupBox>

                <!-- 报警服务控制 -->
                <GroupBox Header="报警服务" Margin="0,10,0,0">
                    <StackPanel Orientation="Horizontal" Margin="10">
                        <Button Content="启动服务" Width="100" Margin="0,0,10,0"
                                Command="{Binding StartAlarmServerCommand}"/>
                        <Button Content="停止服务" Width="100"
                                Command="{Binding StopAlarmServerCommand}"/>
                    </StackPanel>
                </GroupBox>

                <!-- 视频控制 -->
                <GroupBox Header="视频控制" Margin="0,10,0,0">
                    <StackPanel Orientation="Horizontal" Margin="10">
                        <Button Content="播放视频" Width="100" Margin="0,0,10,0"
                                Command="{Binding PlayRtspCommand}"/>
                        <Button Content="停止播放" Width="100"
                                Command="{Binding StopRtspCommand}"/>
                    </StackPanel>
                </GroupBox>
            </StackPanel>

            <!-- 右侧视频 -->
            <GroupBox Header="视频播放" Grid.Column="1" Margin="10,10,10,10">
                <vlc:VideoView x:Name="videoView"/>
            </GroupBox>
        </Grid>

        <!-- 日志输出 -->
        <GroupBox Header="日志输出" Grid.Row="2">
            <ListBox ItemsSource="{Binding LogMessages}"
                     HorizontalContentAlignment="Left"/>
        </GroupBox>
    </Grid>
</Window>
